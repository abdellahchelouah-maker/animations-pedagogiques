<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quiz Syst√®me de Levage</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(180deg, #071028 0%, #071a2a 60%);
    color: #e6eef6;
    padding: 20px;
    min-height: 100vh;
  }
  .container {
    max-width: 900px;
    margin: 0 auto;
    background: rgba(255,255,255,0.02);
    border-radius: 12px;
    padding: 30px;
  }
  h1 { margin-bottom: 10px; }
  .subtitle { color: #9aa4b2; margin-bottom: 20px; }
  .progress-bar {
    height: 8px;
    background: rgba(255,255,255,0.1);
    border-radius: 4px;
    margin-bottom: 20px;
  }
  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #6ee7b7, #60a5fa);
    border-radius: 4px;
    width: 0%;
    transition: width 0.3s;
  }
  .question-card {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.05);
    border-radius: 10px;
    padding: 25px;
    margin-bottom: 20px;
  }
  .question-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
  }
  .question-number { color: #60a5fa; font-weight: bold; }
  .question-type {
    background: rgba(255,255,255,0.05);
    padding: 5px 10px;
    border-radius: 15px;
    font-size: 13px;
    color: #9aa4b2;
  }
  .question-text {
    font-size: 18px;
    margin-bottom: 20px;
    line-height: 1.5;
  }
  .option {
    background: rgba(255,255,255,0.02);
    border: 1px solid rgba(255,255,255,0.05);
    padding: 12px;
    margin-bottom: 10px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .option:hover {
    background: rgba(255,255,255,0.05);
  }
  .option input {
    width: 18px;
    height: 18px;
  }
  .buttons {
    display: flex;
    gap: 10px;
    margin-top: 20px;
  }
  .btn {
    padding: 10px 20px;
    border: 1px solid rgba(255,255,255,0.1);
    background: transparent;
    color: #6ee7b7;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
  }
  .btn:hover {
    background: rgba(110,231,183,0.1);
  }
  .btn-secondary {
    color: #60a5fa;
  }
  .navigation {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 20px;
  }
  .nav-buttons {
    display: flex;
    gap: 10px;
  }
  .feedback {
    margin-top: 15px;
    padding: 15px;
    border-radius: 8px;
    background: rgba(0,0,0,0.3);
  }
  .feedback.correct {
    border-left: 4px solid #6ee7b7;
    background: rgba(110,231,183,0.1);
  }
  .feedback.wrong {
    border-left: 4px solid #fb7185;
    background: rgba(251,113,133,0.1);
  }
  .summary {
    background: rgba(255,255,255,0.03);
    padding: 20px;
    border-radius: 10px;
    margin-top: 20px;
  }
  .summary h2 {
    margin-bottom: 15px;
  }
  .stat {
    display: flex;
    justify-content: space-between;
    padding: 10px 0;
    border-bottom: 1px solid rgba(255,255,255,0.05);
  }
  .modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.8);
    align-items: center;
    justify-content: center;
    z-index: 1000;
  }
  .modal.show {
    display: flex;
  }
  .modal-content {
    background: #071428;
    padding: 40px;
    border-radius: 12px;
    text-align: center;
    max-width: 500px;
  }
  .final-score {
    font-size: 48px;
    color: #6ee7b7;
    font-weight: bold;
    margin: 20px 0;
  }
  .formula {
    background: rgba(255,255,255,0.05);
    padding: 10px;
    border-radius: 6px;
    margin: 10px 0;
    font-family: 'Courier New', monospace;
    font-size: 16px;
  }
</style>
</head>
<body>

<div class="container">
  <h1>Quiz : Syst√®me de Levage 1</h1>
  <p class="subtitle">16 questions ‚Äî Calculs et concepts m√©caniques</p>
  
  <div class="progress-bar">
    <div class="progress-fill" id="progressBar"></div>
  </div>

  <div class="question-card" id="questionCard"></div>

  <div class="navigation">
    <div class="nav-buttons">
      <button class="btn" id="prevBtn">‚Üê Pr√©c√©dent</button>
      <button class="btn" id="nextBtn">Suivant ‚Üí</button>
    </div>
    <div>
      <span>Question <strong id="currentNum">1</strong> / <strong>16</strong></span>
    </div>
  </div>

  <div class="buttons">
    <button class="btn" id="restartBtn">üîÑ Recommencer</button>
    <button class="btn btn-secondary" id="showAnswersBtn">üëÅÔ∏è Afficher r√©ponses</button>
  </div>

  <div class="summary">
    <h2>R√©sum√©</h2>
    <div class="stat">
      <span>Score</span>
      <strong id="scoreDisplay">0 / 16</strong>
    </div>
    <div class="stat">
      <span>R√©ponses correctes</span>
      <strong id="correctDisplay">0</strong>
    </div>
    <div class="stat">
      <span>Questions r√©pondues</span>
      <strong id="answeredDisplay">0</strong>
    </div>
  </div>
</div>

<div class="modal" id="resultModal">
  <div class="modal-content">
    <h2>R√©sultat final</h2>
    <div class="final-score" id="finalScore">0 / 16</div>
    <p id="resultMessage"></p>
    <div style="margin-top: 20px;">
      <button class="btn" id="closeModal">Fermer</button>
    </div>
  </div>
</div>

<script>
const questions = [
  { 
    id: 1, 
    text: "Quel est le poids d'une masse de 100 kg ?", 
    type: "single", 
    options: { a: "100 kg", b: "981 N", c: "10 N" }, 
    correct: ["b"], 
    feedback: { 
      b: "Correct : P = m √ó g = 100 √ó 9,81 ‚âà 981 N", 
      default: "Le poids se calcule avec P = m √ó g, o√π g ‚âà 9,81 m/s¬≤. Donc P = 100 √ó 9,81 = 981 N" 
    } 
  },
  
  { 
    id: 2, 
    text: "Quelle est la vitesse angulaire en rad/s d'un moteur tournant √† 3000 tr/min ?", 
    type: "single", 
    options: { a: "314 rad/s", b: "18850 rad/s", c: "7,95 rad/s" }, 
    correct: ["a"], 
    feedback: { 
      a: "Exact : œâ = (3000 √ó 2œÄ) / 60 ‚âà 314 rad/s", 
      default: "Formule : œâ = (N √ó 2œÄ) / 60. Donc œâ = (3000 √ó 2œÄ) / 60 ‚âà 314 rad/s" 
    } 
  },
  
  { 
    id: 3, 
    text: "Quelle est la vitesse angulaire en rad/s d'un moteur tournant √† 25 tr/s ?", 
    type: "single", 
    options: { a: "120,3 rad/s", b: "157 rad/s", c: "92 rad/s" }, 
    correct: ["b"], 
    feedback: { 
      b: "Correct : œâ = 25 √ó 2œÄ ‚âà 157 rad/s", 
      default: "Formule : œâ = N √ó 2œÄ (si N est en tr/s). Donc œâ = 25 √ó 2œÄ ‚âà 157 rad/s" 
    } 
  },
  
  { 
    id: 4, 
    text: "D√©terminer le rapport du r√©ducteur permettant l'entra√Ænement en rotation d'un plateau √† une vitesse de 78,5 rad/s √† l'aide d'un moteur tournant √† 1500 tr/min.", 
    type: "single", 
    options: { a: "1", b: "1/20", c: "1/2" }, 
    correct: ["c"], 
    feedback: { 
      c: "Exact : œâ_moteur = 1500 √ó 2œÄ / 60 = 157 rad/s. Rapport = 78,5 / 157 = 1/2", 
      default: "Convertir 1500 tr/min en rad/s : 157 rad/s. Rapport = œâ_sortie / œâ_entr√©e = 78,5 / 157 = 1/2" 
    } 
  },
  
  { 
    id: 5, 
    text: "Calculer la vitesse lin√©aire d'un chariot automoteur si les roues motrices (de rayon = 12 cm) sont entra√Æn√©es par un motor√©ducteur tournant √† 300 tr/min.", 
    type: "single", 
    options: { a: "37 m/s", b: "3,77 m/s", c: "0,37 m/s" }, 
    correct: ["b"], 
    feedback: { 
      b: "Correct : œâ = 300 √ó 2œÄ / 60 = 31,4 rad/s. V = œâ √ó r = 31,4 √ó 0,12 ‚âà 3,77 m/s", 
      default: "V = œâ √ó r. Avec œâ = 31,4 rad/s et r = 0,12 m, on obtient V ‚âà 3,77 m/s" 
    } 
  },
  
  { 
    id: 6, 
    text: "Un moteur √©lectrique entra√Æne par l'interm√©diaire d'un r√©ducteur les roues motrices d'un chariot automoteur. Quelle vitesse lin√©aire de d√©placement du chariot si le moteur tourne √† 750 tr/min et si les roues ont un diam√®tre de 38,2 mm ?", 
    type: "single", 
    options: { a: "5 m/s", b: "7,75 m/s", c: "1,5 m/s" }, 
    correct: ["c"], 
    feedback: { 
      c: "Exact : œâ = 750 √ó 2œÄ / 60 = 78,5 rad/s. V = œâ √ó r = 78,5 √ó 0,0191 ‚âà 1,5 m/s", 
      default: "V = œâ √ó r. Le rayon est 38,2/2 = 19,1 mm = 0,0191 m. Avec œâ = 78,5 rad/s, V ‚âà 1,5 m/s" 
    } 
  },
  
  { 
    id: 7, 
    text: "D√©terminer la puissance m√©canique n√©cessaire au d√©placement vertical d'une masse de 750 kg √† la vitesse lin√©aire de 0,15 m/s ?", 
    type: "single", 
    options: { a: "100 W", b: "981 W", c: "1,1 kW" }, 
    correct: ["c"], 
    feedback: { 
      c: "Correct : P = F √ó v = (m √ó g) √ó v = (750 √ó 9,81) √ó 0,15 ‚âà 1103 W ‚âà 1,1 kW", 
      default: "P = Force √ó vitesse = (masse √ó g) √ó v. P = (750 √ó 9,81) √ó 0,15 ‚âà 1,1 kW" 
    } 
  },
  
  { 
    id: 8, 
    text: "Calculer le couple r√©sistant que repr√©sente une masse de 70 kg soulev√©e par l'interm√©diaire d'une poulie de 30 cm de diam√®tre.", 
    type: "single", 
    options: { a: "206 N.m", b: "52 N.m", c: "103 N.m" }, 
    correct: ["c"], 
    feedback: { 
      c: "Exact : C = F √ó r = (m √ó g) √ó r = (70 √ó 9,81) √ó 0,15 ‚âà 103 N.m", 
      default: "Couple = Force √ó rayon. Le rayon = 30/2 = 15 cm = 0,15 m. C = (70 √ó 9,81) √ó 0,15 ‚âà 103 N.m" 
    } 
  },
  
  { 
    id: 9, 
    text: "Calculer l'inertie totale par rapport √† l'axe \"grande vitesse\" d'un syst√®me compos√© de 3 ensembles ayant respectivement une inertie par rapport √† cet axe de J1 = 0,07 m¬≤.kg ; J2 = 0,0000012 m¬≤.kg et J3 = 0,000008 m¬≤.kg.", 
    type: "single", 
    options: { a: "0,08 m¬≤.kg", b: "1,2 m¬≤.kg", c: "0,07 m¬≤.kg" }, 
    correct: ["c"], 
    feedback: { 
      c: "Correct : J_totale = J1 + J2 + J3 = 0,07 + 0,0000012 + 0,000008 ‚âà 0,07 m¬≤.kg", 
      default: "L'inertie totale est la somme des inerties. Les valeurs de J2 et J3 sont n√©gligeables devant J1." 
    } 
  },
  
  { 
    id: 10, 
    text: "Un ascenseur doit soulever une cabine de 1,2 tonnes √† la vitesse de 5 m/s. La cha√Æne cin√©matique admet un rendement de 72 %. Calculer la puissance m√©canique que devra d√©velopper le moteur.", 
    type: "single", 
    options: { a: "6 kW", b: "81,750 kW", c: "211,9 kW" }, 
    correct: ["b"], 
    feedback: { 
      b: "Exact : P_utile = (1200 √ó 9,81) √ó 5 = 58860 W. P_moteur = 58860 / 0,72 ‚âà 81,75 kW", 
      default: "P = (m √ó g √ó v) / rendement = (1200 √ó 9,81 √ó 5) / 0,72 ‚âà 81,75 kW" 
    } 
  },
  
  { 
    id: 11, 
    text: "La puissance m√©canique fournie par un moteur se calcule par la formule : P = C √ó œâ", 
    type: "single", 
    options: { a: "Vrai", b: "Faux" }, 
    correct: ["a"], 
    feedback: { 
      a: "Correct : P = C √ó œâ (Puissance = Couple √ó vitesse angulaire)", 
      default: "La formule P = C √ó œâ est correcte pour la puissance m√©canique en rotation." 
    } 
  },
  
  { 
    id: 12, 
    text: "La puissance m√©canique fournie par un moteur se calcule par la formule : P = F √ó v", 
    type: "single", 
    options: { a: "Vrai", b: "Faux" }, 
    correct: ["a"], 
    feedback: { 
      a: "Correct : P = F √ó v (Puissance = Force √ó vitesse) pour un mouvement de translation", 
      default: "La formule P = F √ó v est correcte pour la puissance m√©canique en translation." 
    } 
  },
  
  { 
    id: 13, 
    text: "La puissance m√©canique fournie par un moteur se calcule par la formule : P = U √ó I (pour un moteur √©lectrique)", 
    type: "single", 
    options: { a: "Vrai", b: "Faux" }, 
    correct: ["b"], 
    feedback: { 
      b: "Correct : P = U √ó I donne la puissance √©lectrique, pas m√©canique. La puissance m√©canique n√©cessite le rendement.", 
      default: "P = U √ó I est la puissance √©lectrique. Pour la puissance m√©canique : P_meca = P_elec √ó rendement" 
    } 
  },
  
  { 
    id: 14, 
    text: "Pour une machine √† courant alternatif, peut-on superposer les caract√©ristiques √©lectriques et m√©caniques ?", 
    type: "single", 
    options: { a: "Oui", b: "Non" }, 
    correct: ["b"], 
    feedback: { 
      b: "Correct : pour les machines AC, la vitesse d√©pend de la fr√©quence, pas directement de la tension.", 
      default: "Non, car en AC la vitesse est li√©e √† la fr√©quence du r√©seau." 
    } 
  },
  
  { 
    id: 15, 
    text: "Pour une machine √† courant continu, peut-on superposer les caract√©ristiques √©lectriques et m√©caniques ?", 
    type: "single", 
    options: { a: "Oui", b: "Non" }, 
    correct: ["a"], 
    feedback: { 
      a: "Correct : pour une machine DC, il existe une proportionnalit√© directe entre tension et vitesse.", 
      default: "Oui, car en DC la vitesse est proportionnelle √† la tension d'alimentation." 
    } 
  },
  
  { 
    id: 16, 
    text: "A partir de la constitution fonctionnelle du variateur, pr√©ciser si la charge peut restituer de l'√©nergie :", 
    type: "single", 
    options: { a: "Au secteur", b: "Au circuit de freinage", c: "Au moteur" }, 
    correct: ["b"], 
    feedback: { 
      b: "Correct : l'√©nergie de freinage est dissip√©e dans le circuit de freinage (r√©sistance).", 
      default: "L'√©nergie est g√©n√©ralement dissip√©e dans un circuit de freinage d√©di√©." 
    } 
  }
];

let currentIndex = 0;
let userAnswers = {};

function renderQuestion() {
  const q = questions[currentIndex];
  const card = document.getElementById('questionCard');
  
  let html = `
    <div class="question-header">
      <div class="question-number">Question ${currentIndex + 1} / 16</div>
      <div class="question-type">${q.type === 'multi' ? 'Choix multiple' : 'Choix unique'}</div>
    </div>
    <div class="question-text">${q.text}</div>
    <div class="options">
  `;
  
  for (const [key, text] of Object.entries(q.options)) {
    const inputType = q.type === 'multi' ? 'checkbox' : 'radio';
    const checked = userAnswers[q.id] && userAnswers[q.id].includes(key) ? 'checked' : '';
    html += `
      <label class="option">
        <input type="${inputType}" name="q${q.id}" value="${key}" ${checked} onchange="handleAnswer('${q.id}', '${key}', this.checked, '${q.type}')">
        <span>${key.toUpperCase()}. ${text}</span>
      </label>
    `;
  }
  
  html += `
    </div>
    <div class="buttons">
      <button class="btn" onclick="validateQuestion()">‚úì Valider</button>
      <button class="btn btn-secondary" onclick="clearAnswer()">‚úó Effacer</button>
    </div>
  `;
  
  if (userAnswers[q.id] && userAnswers[q.id].validated) {
    const v = userAnswers[q.id].validated;
    html += `
      <div class="feedback ${v.correct ? 'correct' : 'wrong'}">
        <strong>${v.correct ? '‚úì Bonne r√©ponse !' : '‚úó R√©ponse incorrecte'}</strong>
        <p>${v.message}</p>
      </div>
    `;
  }
  
  card.innerHTML = html;
  document.getElementById('currentNum').textContent = currentIndex + 1;
  updateProgress();
  updateSummary();
}

function handleAnswer(qid, key, checked, type) {
  if (!userAnswers[qid]) userAnswers[qid] = [];
  if (userAnswers[qid].validated) delete userAnswers[qid].validated;
  
  if (type === 'multi') {
    if (checked) {
      if (!userAnswers[qid].includes(key)) userAnswers[qid].push(key);
    } else {
      userAnswers[qid] = userAnswers[qid].filter(k => k !== key);
    }
  } else {
    userAnswers[qid] = [key];
  }
  updateSummary();
}

function validateQuestion() {
  const q = questions[currentIndex];
  const selected = userAnswers[q.id] || [];
  
  const correctSorted = [...q.correct].sort().join(',');
  const selectedSorted = [...selected].sort().join(',');
  const isCorrect = correctSorted === selectedSorted;
  
  let message = '';
  if (q.type === 'single') {
    if (isCorrect) {
      message = q.feedback[selected[0]] || q.feedback.default || 'Bonne r√©ponse !';
    } else {
      message = q.feedback.default || 'R√©ponse incorrecte.';
    }
  } else {
    message = isCorrect ? (q.feedback.ok || 'Bonne r√©ponse !') : (q.feedback.ko || 'R√©ponse incorrecte.');
  }
  
  if (!userAnswers[q.id]) userAnswers[q.id] = [];
  userAnswers[q.id].validated = { correct: isCorrect, message: message };
  
  renderQuestion();
  checkCompletion();
}

function clearAnswer() {
  const q = questions[currentIndex];
  userAnswers[q.id] = [];
  renderQuestion();
}

function updateProgress() {
  const progress = ((currentIndex + 1) / questions.length) * 100;
  document.getElementById('progressBar').style.width = progress + '%';
}

function updateSummary() {
  const answered = Object.keys(userAnswers).filter(k => userAnswers[k].length > 0).length;
  const correct = Object.keys(userAnswers).filter(k => userAnswers[k].validated && userAnswers[k].validated.correct).length;
  
  document.getElementById('scoreDisplay').textContent = `${correct} / 16`;
  document.getElementById('correctDisplay').textContent = correct;
  document.getElementById('answeredDisplay').textContent = answered;
}

function checkCompletion() {
  const allValidated = questions.every(q => userAnswers[q.id] && userAnswers[q.id].validated);
  if (allValidated) {
    setTimeout(showResults, 1000);
  }
}

function showResults() {
  const correct = Object.keys(userAnswers).filter(k => userAnswers[k].validated && userAnswers[k].validated.correct).length;
  const pct = Math.round((correct / 16) * 100);
  
  document.getElementById('finalScore').textContent = `${correct} / 16`;
  
  let msg = '';
  if (pct === 100) msg = 'üéâ Parfait ! Excellente ma√Ætrise des calculs m√©caniques.';
  else if (pct >= 80) msg = 'üëç Tr√®s bien ! Vous ma√Ætrisez bien les syst√®mes de levage.';
  else if (pct >= 50) msg = 'üìö Moyen. R√©visez les formules de base.';
  else msg = 'üìñ √Ä am√©liorer. Reprenez les notions de m√©canique.';
  
  document.getElementById('resultMessage').textContent = msg;
  document.getElementById('resultModal').classList.add('show');
}

document.getElementById('prevBtn').onclick = () => {
  if (currentIndex > 0) {
    currentIndex--;
    renderQuestion();
  }
};

document.getElementById('nextBtn').onclick = () => {
  if (currentIndex < questions.length - 1) {
    currentIndex++;
    renderQuestion();
  }
};

document.getElementById('restartBtn').onclick = () => {
  if (confirm('Recommencer le quiz ? Toutes les r√©ponses seront perdues.')) {
    currentIndex = 0;
    userAnswers = {};
    renderQuestion();
  }
};

document.getElementById('showAnswersBtn').onclick = () => {
  if (confirm('Afficher toutes les bonnes r√©ponses ?')) {
    questions.forEach(q => {
      userAnswers[q.id] = [...q.correct];
      const msg = q.type === 'single' ? (q.feedback[q.correct[0]] || 'R√©ponse correcte') : (q.feedback.ok || 'R√©ponses correctes');
      userAnswers[q.id].validated = { correct: true, message: msg };
    });
    renderQuestion();
  }
};

document.getElementById('closeModal').onclick = () => {
  document.getElementById('resultModal').classList.remove('show');
};

renderQuestion();
</script>
</body>
</html>